import{_ as P,i as V,k as A,l as p,n as E,r as f,o,c as a,b as m,a as t,p as x,x as h,h as L,F as w,q as C,t as c,w as I,S as y,e as k}from"./index-tVzfk2aA.js";import{V as j}from"./VueLoading-gheappAG.js";import{F as O}from"./FooterComponent-DMLyIBGt.js";var S={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:v,VITE_APP_PATH:g}=S,T={components:{VueLoading:j,FooterComponent:O},setup(){const l=V("$axios"),d=A(),u=p({user:{}}),e=p(""),n=p(!1);function _(){const i=`${v}api/${g}/order/${e.value}`;n.value=!0,l.get(i).then(s=>{n.value=!1,s.data.success&&(u.value=s.data.order)}).catch(s=>{n.value=!1,y("error",`${s.response.data.message}`)})}function b(){const i=`${v}api/${g}/pay/${e.value}`;n.value=!0,l.post(i).then(s=>{n.value=!1,s.data.success&&_()}).catch(s=>{n.value=!1,y("error",`${s.response.data.message}`)})}return E(()=>{e.value=d.params.orderId,_()}),{order:u,orderId:e,isLoading:n,getOrder:_,payOrder:b}}},F={class:"mb-5"},R={class:"container"},N=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"結帳流程")],-1),B={class:"d-flex justify-content-center align-items-center mb-5 mt-3"},D=t("h5",{class:"d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header"},[t("i",{class:"bi bi-1-circle mb-1"}),t("span",null,"填寫資料")],-1),M=t("i",{class:"bi bi-caret-right-fill fs-5 mx-1 mx-md-2 text-secondary"},null,-1),q=t("i",{class:"bi bi-2-circle mb-1"},null,-1),H=t("span",null,"確認訂單",-1),U=[q,H],z=t("i",{class:"bi bi-caret-right-fill fs-5 mx-1 mx-md-2 text-secondary"},null,-1),G=t("i",{class:"bi bi-3-circle mb-1"},null,-1),J=t("span",null,"訂單完成",-1),K=[G,J],Q={class:"row justify-content-center align-items-center"},W={class:"col-md-10"},X={key:0,class:"d-flex justify-content-center align-items-center mt-5"},Y=t("i",{class:"bi bi-bag-check-fill fs-2 pe-2 text-success"},null,-1),Z=t("h2",{class:"fw-bold mb-0 text-success"},"訂購成功 !",-1),$=[Y,Z],tt={key:1,class:"fw-bold mt-4 mb-5 text-center"},et={class:"my-5 row justify-content-center"},st=t("h3",{class:"text-center fw-bold mb-4"},"訂單明細",-1),ot={class:"table align-middle table-light table-borderless mb-4"},at=t("thead",{class:"text-center"},[t("tr",null,[t("th",{class:"text-nowrap"},"商品名稱"),t("th",{class:"text-center text-nowrap"},"數量"),t("th",{class:"text-nowrap"},"價格")])],-1),nt={class:"text-center"},ct={class:"text-center text-nowrap"},rt={class:"text-center text-nowrap"},lt=t("td",{colspan:"2",class:"text-end text-nowrap"},"總計",-1),it={class:"fs-5 text-primary fw-bold text-nowrap"},dt=t("h3",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),_t={class:"table table-light table-borderless mb-4"},ht={class:"table-nowrap"},ut=t("th",{class:"text-nowrap"},"姓名",-1),bt={class:"text-nowrap"},pt={class:"table-nowrap"},ft=t("th",{width:"100",class:"text-nowrap"},"Email",-1),mt={class:"text-nowrap"},xt={class:"table-nowrap"},wt=t("th",{class:"text-nowrap"},"電話",-1),yt={class:"text-nowrap"},vt={class:"table-nowrap"},gt=t("th",{class:"text-nowrap"},"付款方式",-1),kt={class:"text-nowrap"},Pt={class:"table-nowrap"},Vt=t("th",null,"訂購狀態",-1),At={key:0,class:"text-nowrap text-danger fw-bold"},Et={key:1,class:"text-success fw-bold text-nowrap"},Lt={key:0,class:"text-end"},Ct=t("button",{class:"btn btn-primary ms-auto",type:"submit"},[k(" 確認訂購"),t("i",{class:"bi bi-caret-right-fill"})],-1),It=[Ct],jt={key:1,class:"text-end"},Ot=t("i",{class:"bi bi-cart4 pe-1 fs-5"},null,-1);function St(l,d,u,e,n,_){const b=f("VueLoading"),i=f("RouterLink"),s=f("FooterComponent");return o(),a(w,null,[m(b,{active:e.isLoading},null,8,["active"]),t("section",F,[t("div",R,[N,t("div",B,[D,M,t("h5",{class:x(["d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!1}])},U,2),z,t("h5",{class:x(["d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!0}])},K,2)]),t("div",Q,[t("div",W,[e.order.is_paid===!0?(o(),a("div",X,$)):h("",!0),e.order.is_paid===!0?(o(),a("h6",tt," 感謝您的訂購，訂單明細將會寄送至您的電子信箱 ! ")):h("",!0),t("div",et,[st,t("form",{class:"col-lg-6",onSubmit:d[0]||(d[0]=L((...r)=>e.payOrder&&e.payOrder(...r),["prevent"]))},[t("table",ot,[at,t("tbody",null,[(o(!0),a(w,null,C(e.order.products,r=>(o(),a("tr",{key:r.id},[t("td",nt,c(r.product.title),1),t("td",ct,c(r.qty),1),t("td",rt,c(l.$filters.currency(r.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[lt,t("td",it,c(l.$filters.currency(e.order.total)),1)])])]),dt,t("table",_t,[t("tbody",null,[t("tr",ht,[ut,t("td",bt,c(e.order.user.name),1)]),t("tr",pt,[ft,t("td",mt,c(e.order.user.email),1)]),t("tr",xt,[wt,t("td",yt,c(e.order.user.tel),1)]),t("tr",vt,[gt,t("td",kt,c(e.order.user.pay),1)]),t("tr",Pt,[Vt,t("td",null,[e.order.is_paid?(o(),a("span",Et,"訂購完成")):(o(),a("span",At,"尚未訂購"))])])])]),e.order.is_paid===!1?(o(),a("div",Lt,It)):h("",!0),e.order.is_paid===!0?(o(),a("div",jt,[m(i,{to:"/products",class:"btn btn-primary ms-auto"},{default:I(()=>[Ot,k("繼續選購")]),_:1})])):h("",!0)],32)])])])])]),m(s)],64)}const Nt=P(T,[["render",St]]);export{Nt as default};
