import{_ as C,R as F,m as L,h,S,i as U,r as i,o as c,c as d,b as o,a as e,F as p,j as q,t as m,k as g,w as x,d as B,e as n,n as b,f as E,v as N}from"./index-OYs4CaJ0.js";import{F as j}from"./FooterComponent-BVXF6j9_.js";const R={components:{RouterLink:F,FooterComponent:j},data(){return{isLoading:!1,total:0,final_total:0,form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:""}},methods:{...L(h,["getCart"]),createOrder(){const t="https://vue3-course-api.hexschool.io/api/funniecafeweb/order",s=this.form;this.$http.post(t,{data:s}).then(u=>{this.$router.push(`/checkorder/${u.data.orderId}`)}).catch(u=>{S.fire({position:"top",icon:"error",title:`${u.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})}},computed:{...U(h,["cart"])},created(){this.getCart()}},M={class:"mb-5"},O={class:"container"},D=B('<div class="d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"><h2 class="position-absolute text-center text-white fw-bolder banner-title">結帳流程</h2></div><div class="d-flex justify-content-center align-items-center my-5 mt-3"><h5 class="fw-bold mb-0 text-secondary pay-header active">填寫資料</h5><i class="bi bi-caret-right-fill fs-5 mx-2 text-secondary"></i><h5 class="fw-bold mb-0 text-secondary pay-header">確認付款</h5><i class="bi bi-caret-right-fill fs-5 mx-2 text-secondary"></i><h5 class="fw-bold mb-0 text-secondary pay-header">訂單完成</h5></div>',2),T={class:"row my-5 py-5 bg-light rounded-2"},z={class:"col-lg-7"},A=e("h2",{class:"text-center fw-bold mb-4"},"商品明細",-1),I={class:"table-responsive-md mb-5 mb-lg-0"},P={class:"table align-middle table-light table-borderless"},$=e("thead",{class:"text-center table-secondary"},[e("tr",{class:"table-nowrap"},[e("th",null,"商品名稱"),e("th",{class:"text-nowrap"},"數量"),e("th",{class:"text-end"},"價格")])],-1),G={class:"text-center"},H={class:"table-nowrap fw-bold text-primary"},J={class:"text-end text-nowrap"},K={key:0,class:"text-success text-end"},Q=e("td",{colspan:"2",class:"text-end fs-5"},"總計",-1),W={class:"text-end fs-5 text-primary fw-bold"},X={key:0},Y=e("td",{colspan:"2",class:"text-end text-success fs-5"},"優惠價",-1),Z={class:"text-end text-success fs-5 fw-bold"},ee={class:"row col-lg-5"},te=e("h2",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),se={class:"mb-3"},oe=e("label",{for:"email",class:"form-label"},[n("Email"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),le={class:"mb-3"},ae=e("label",{for:"name",class:"form-label"},[n("訂購人姓名"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),re={class:"mb-3"},ne=e("label",{for:"tel",class:"form-label"},[n("訂購人電話"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),ie={class:"mb-3"},ce=e("label",{for:"address",class:"form-label"},[n("訂購人地址"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),de={class:"mb-3"},me=e("label",{for:"message",class:"form-label"},"留言",-1),ue={class:"d-flex justify-content-between"},fe=e("i",{class:"bi bi-caret-left-fill"},null,-1),_e=e("button",{type:"submit",class:"btn btn-secondary check-btn"},[n("確認訂單"),e("i",{class:"bi bi-caret-right-fill"})],-1);function be(t,s,u,he,l,y){const v=i("LoadingVue"),f=i("FieldVue"),_=i("ErrorMessage"),w=i("RouterLink"),V=i("FormVue"),k=i("FooterComponent");return c(),d(p,null,[o(v,{active:l.isLoading,loader:"spinner",color:"#fca311",width:70,height:70},null,8,["active"]),e("section",M,[e("div",O,[D,e("div",T,[e("div",z,[A,e("div",I,[e("table",P,[$,e("tbody",G,[(c(!0),d(p,null,q(t.cart.carts,a=>(c(),d("tr",{class:"table-nowrap",key:a.id},[e("td",H,m(a.product.title),1),e("td",null,m(a.qty),1),e("td",J,[t.cart.final_total!==t.cart.total?(c(),d("small",K,"優惠價：")):g("",!0),n(" "+m(t.$filters.currency(a.final_total)),1)])]))),128))]),e("tfoot",null,[e("tr",null,[Q,e("td",W,m(t.$filters.currency(t.cart.total)),1)]),t.cart.final_total!==t.cart.total?(c(),d("tr",X,[Y,e("td",Z,m(t.$filters.currency(t.cart.final_total)),1)])):g("",!0)])])])]),e("div",ee,[te,o(V,{onSubmit:y.createOrder},{default:x(({errors:a})=>[e("div",se,[oe,o(f,{id:"email",name:"email",type:"email",class:b(["form-control",{"is-invalid":a.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=r=>l.form.user.email=r)},null,8,["class","modelValue"]),o(_,{name:"email",class:"invalid-feedback"})]),e("div",le,[ae,o(f,{id:"name",name:"姓名",type:"text",class:b(["form-control",{"is-invalid":a.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=r=>l.form.user.name=r)},null,8,["class","modelValue"]),o(_,{name:"姓名",class:"invalid-feedback"})]),e("div",re,[ne,o(f,{id:"tel",name:"電話",type:"tel",class:b(["form-control",{"is-invalid":a.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:l.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=r=>l.form.user.tel=r)},null,8,["class","modelValue"]),o(_,{name:"電話",class:"invalid-feedback"})]),e("div",ie,[ce,o(f,{id:"address",name:"地址",type:"text",class:b(["form-control",{"is-invalid":a.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=r=>l.form.user.address=r)},null,8,["class","modelValue"]),o(_,{name:"地址",class:"invalid-feedback"})]),e("div",de,[me,E(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=r=>l.form.message=r)},null,512),[[N,l.form.message]])]),e("div",ue,[o(w,{class:"btn btn-outline-primary",to:"/cart"},{default:x(()=>[fe,n("回上一頁")]),_:1}),_e])]),_:1},8,["onSubmit"])])])])]),o(k)],64)}const xe=C(R,[["render",be]]);export{xe as default};
