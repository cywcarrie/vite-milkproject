import{F as g}from"./FooterComponent-bBpZw_xH.js";import{_ as v,S as h,r as d,o,c as r,b as l,a as t,n as p,k as i,g as k,F as u,j as P,t as n,w as I,e as m}from"./index-sMZTjVOa.js";var V={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:b,VITE_APP_PATH:f}=V,C={components:{FooterComponent:g},data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const a=`${b}api/${f}/order/${this.orderId}`;this.$http.get(a).then(s=>{s.data.success&&(this.order=s.data.order)}).catch(s=>{h.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})},payOrder(){const a=`${b}api/${f}/pay/${this.orderId}`;this.$http.post(a).then(s=>{s.data.success&&this.getOrder()}).catch(s=>{h.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},A={class:"mb-5"},E={class:"container"},O=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"結帳流程")],-1),B={class:"d-flex justify-content-center align-items-center mb-5 mt-3"},L=t("h5",{class:"fw-bold mb-0 text-secondary pay-header"},"填寫資料",-1),j=t("i",{class:"bi bi-caret-right-fill fs-5 mx-2 text-secondary"},null,-1),S=t("i",{class:"bi bi-caret-right-fill fs-5 mx-2 text-secondary"},null,-1),T={class:"row justify-content-center align-items-center"},F={class:"col-md-10"},R={key:0,class:"d-flex justify-content-center align-items-center"},D=t("i",{class:"bi bi-check-circle-fill fs-2 pe-2 text-success"},null,-1),N=t("h2",{class:"fw-bold mb-0 text-success"},"付款成功 !",-1),H=[D,N],M={key:1,class:"fw-bold mt-4 mb-5 text-center"},U={class:"my-5 row justify-content-center"},q=t("h3",{class:"text-center fw-bold mb-4"},"訂單明細",-1),z={class:"table align-middle table-light table-borderless mb-4"},G=t("thead",{class:"text-center bg-light"},[t("th",{class:"text-nowrap"},"商品名稱"),t("th",{class:"text-center text-nowrap"},"數量"),t("th",{class:"text-nowrap"},"價格")],-1),J={class:"text-center text-primary fw-bold"},K={class:"text-center text-nowrap"},Q={class:"text-center text-nowrap"},W=t("td",{colspan:"2",class:"text-end text-nowrap"},"總計",-1),X={class:"fs-5 text-primary fw-bold text-nowrap"},Y=t("h3",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),Z={class:"table table-light table-borderless mb-4"},$={class:"table-nowrap"},tt=t("th",{width:"100",class:"text-nowrap"},"Email",-1),et={class:"text-nowrap"},st={class:"table-nowrap"},ot=t("th",{class:"text-nowrap"},"姓名",-1),rt={class:"text-nowrap"},nt={class:"table-nowrap"},ct=t("th",{class:"text-nowrap"},"電話",-1),at={class:"text-nowrap"},it={class:"table-nowrap"},dt=t("th",null,"地址",-1),lt={class:"text-nowrap"},_t={class:"table-nowrap"},ht=t("th",null,"付款狀態",-1),pt={key:0,class:"text-nowrap text-danger fw-bold"},ut={key:1,class:"text-success fw-bold text-nowrap"},bt={key:0,class:"text-end"},ft=t("button",{class:"btn btn-primary ms-auto",type:"submit"},[m("確認付款"),t("i",{class:"bi bi-caret-right-fill"})],-1),mt=[ft],xt={key:1,class:"text-end"},wt=t("i",{class:"bi bi-cart4 pe-1 fs-5"},null,-1);function yt(a,s,gt,vt,e,_){const x=d("LoadingVue"),w=d("RouterLink"),y=d("FooterComponent");return o(),r(u,null,[l(x,{active:e.isLoading,loader:"spinner",color:"#fca311",width:70,height:70},null,8,["active"]),t("section",A,[t("div",E,[O,t("div",B,[L,j,t("h5",{class:p(["fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!1}])},"確認付款",2),S,t("h5",{class:p(["fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!0}])},"訂單完成",2)]),t("div",T,[t("div",F,[e.order.is_paid===!0?(o(),r("div",R,H)):i("",!0),e.order.is_paid===!0?(o(),r("h6",M,"感謝您的訂購，訂單明細將會寄送至您的電子信箱 !")):i("",!0),t("div",U,[q,t("form",{class:"col-lg-6",onSubmit:s[0]||(s[0]=k((...c)=>_.payOrder&&_.payOrder(...c),["prevent"]))},[t("table",z,[G,t("tbody",null,[(o(!0),r(u,null,P(e.order.products,c=>(o(),r("tr",{key:c.id},[t("td",J,n(c.product.title),1),t("td",K,n(c.qty)+"/"+n(c.product.unit),1),t("td",Q,n(c.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[W,t("td",X,n(e.order.total),1)])])]),Y,t("table",Z,[t("tbody",null,[t("tr",$,[tt,t("td",et,n(e.order.user.email),1)]),t("tr",st,[ot,t("td",rt,n(e.order.user.name),1)]),t("tr",nt,[ct,t("td",at,n(e.order.user.tel),1)]),t("tr",it,[dt,t("td",lt,n(e.order.user.address),1)]),t("tr",_t,[ht,t("td",null,[e.order.is_paid?(o(),r("span",ut,"付款完成")):(o(),r("span",pt,"尚未付款"))])])])]),e.order.is_paid===!1?(o(),r("div",bt,mt)):i("",!0),e.order.is_paid===!0?(o(),r("div",xt,[l(w,{to:"/products",class:"btn btn-primary ms-auto"},{default:I(()=>[wt,m("繼續選購")]),_:1})])):i("",!0)],32)])])])])]),l(y)],64)}const It=v(C,[["render",yt]]);export{It as default};
