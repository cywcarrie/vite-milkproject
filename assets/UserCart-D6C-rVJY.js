import{_ as g,m as w,h,i as k,r as _,o as n,c as a,b as r,a as t,g as x,w as p,F as f,e as l,j as $,t as c,k as i,f as m,v as y,d as V}from"./index-sMZTjVOa.js";import{F as j}from"./FooterComponent-bBpZw_xH.js";const L={components:{FooterComponent:j},data(){return{coupon_code:""}},methods:{...w(h,["getCart","updateCart","removeCartItem","deleteAllCart","getProduct","addCouponCode","copyCouponCode"])},computed:{...k(h,["carts","total","final_total","cart","isLoading"])},mounted(){this.getCart()}},F={class:"mb-5"},N={class:"container"},q=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder"},"購物車")],-1),A=t("i",{class:"bi bi-arrow-left-square-fill fs-2"},null,-1),S=[A],U={class:"d-flex justify-content-start mt-3 mb-4"},B=t("i",{class:"bi bi-house-heart pe-2 fs-5"},null,-1),D=t("div",{class:"d-flex justify-content-center mt-5"},[t("h1",{class:"fs-2 fw-bold text-primary"},"我的購物車")],-1),I={class:"d-flex mt-4"},M={class:"flex-fill text-end"},P=t("i",{class:"bi bi-trash3 pe-1"},null,-1),R={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},T={class:"col table-responsive mt-4 mb-4"},E={class:"table align-middle text-center table-light table-borderless"},z=t("thead",{class:"table-secondary"},[t("tr",{class:"table-nowrap"},[t("th",{class:"text-nowrap"},"商品名稱"),t("th",{class:"text-nowrap"},"數量"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計"),t("th",{class:"text-end"})])],-1),G={class:"text-center"},H=["onClick"],J={key:0,class:"text-success"},K={class:"text-nowrap"},O={class:"d-flex justify-content-center"},Q={class:"input-group input-group-sm cart-qty"},W=["onChange","onUpdate:modelValue"],X={class:"input-group-text"},Y={class:"text-end text-nowrap"},Z={class:"text-end text-nowrap"},tt={key:0,class:"text-success"},et=["onClick"],st=t("i",{class:"bi bi-trash3"},null,-1),ot=[st],nt=t("td",{colspan:"3",class:"text-end fs-4"},"總計",-1),at={class:"text-end fs-4 text-primary fw-bold"},lt={key:0},ct=t("td",{colspan:"3",class:"text-end text-success fs-4"},"優惠價：",-1),it={class:"text-end text-success fs-4 fw-bold"},rt={class:"d-flex justify-content-end align-items-center"},dt={key:0,class:"input-group mb-3 coupon-input"},ut=V('<div class="d-flex justify-content-end align-items-center mb-2"><div class="fs-6 fw-bold text-primary"><i class="bi bi-bag-check-fill pe-2"></i>輸入優惠碼 <span class="fw-bold text-secondary">funniemilk</span> 即享 <span class="fw-bold text-secondary">9 </span>折優惠</div></div>',1),pt={class:"d-flex justify-content-end align-items-center mb-4"},bt=t("span",null,[t("i",{class:"bi bi-clipboard-fill pe-1"}),t("span",null,"複製優惠碼")],-1),_t=[bt],ft={key:0,class:"d-flex justify-content-between mt-4 mb-4"},ht={key:1,class:"py-5 mb-5"},mt={class:"text-center pt-4"},yt=t("h2",{class:"fw-bolder mb-5"},"您尚未有商品加入購物車",-1);function vt(e,o,Ct,gt,b,wt){const v=_("LoadingVue"),d=_("RouterLink"),C=_("FooterComponent");return n(),a(f,null,[r(v,{active:e.isLoading,loader:"spinner",color:"#fca311",width:70,height:70},null,8,["active"]),t("section",F,[t("div",N,[q,t("a",{href:"#",title:"回上一頁",class:"text-black-50 hover-nav fw-bold mt-3",onClick:o[0]||(o[0]=x(s=>e.$router.go(-1),["prevent"]))},S),t("div",U,[r(d,{class:"btn btn-primary fw-bold",to:"/products"},{default:p(()=>[B,l("回到商品列表")]),_:1})]),e.cart.total!==0?(n(),a(f,{key:0},[D,t("div",I,[t("div",M,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:o[1]||(o[1]=(...s)=>e.deleteAllCart&&e.deleteAllCart(...s))},[P,l("清空購物車 ")])])]),t("div",R,[t("div",T,[t("table",E,[z,t("tbody",G,[(n(!0),a(f,null,$(e.cart.carts,s=>(n(),a("tr",{class:"table-nowrap",key:s.id},[t("td",{class:"text-nowrap fw-bold text-primary cursor-pointer hover-nav",onClick:u=>e.getProduct(s.product_id)},[l(c(s.product.category)+" | "+c(s.product.title)+" ",1),s.coupon?(n(),a("div",J," 已套用優惠券 ")):i("",!0)],8,H),t("td",K,[t("div",O,[t("div",Q,[m(t("input",{type:"number",class:"form-control",min:"1",onChange:u=>e.updateCart(s),"onUpdate:modelValue":u=>s.qty=u},null,40,W),[[y,s.qty,void 0,{number:!0}]]),t("div",X,"/ "+c(s.product.unit),1)])])]),t("td",Y,c(e.$filters.currency(s.product.price)),1),t("td",Z,[e.cart.final_total!==e.cart.total?(n(),a("small",tt,"優惠價：")):i("",!0),l(" "+c(e.$filters.currency(s.final_total)),1)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:u=>e.removeCartItem(s.id)},ot,8,et)])]))),128))]),t("tfoot",null,[t("tr",null,[nt,t("td",at,c(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(n(),a("tr",lt,[ct,t("td",it,c(e.$filters.currency(e.cart.final_total)),1)])):i("",!0)])])]),t("div",rt,[e.cart.total!==0?(n(),a("div",dt,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=s=>b.coupon_code=s),placeholder:"請輸入優惠碼"},null,512),[[y,b.coupon_code]]),t("button",{class:"btn btn-primary",type:"button",onClick:o[3]||(o[3]=s=>e.addCouponCode(b.coupon_code))}," 套用優惠碼 ")])):i("",!0)]),ut,t("div",pt,[t("button",{onClick:o[4]||(o[4]=(...s)=>e.copyCouponCode&&e.copyCouponCode(...s)),class:"btn btn-outline-primary",type:"button"},_t)]),e.cart.total!==0?(n(),a("div",ft,[r(d,{class:"btn btn-outline-primary",to:"/products"},{default:p(()=>[l("繼續選購")]),_:1}),r(d,{class:"btn btn-secondary ms-auto check-btn",to:"/checkout"},{default:p(()=>[l("前往結帳")]),_:1})])):i("",!0)])],64)):i("",!0),e.cart.total===0?(n(),a("div",ht,[t("div",mt,[yt,r(d,{class:"btn btn-primary btn-lg fw-bold",to:"/products"},{default:p(()=>[l("來去逛逛吧 !")]),_:1})])])):i("",!0)])]),r(C)],64)}const $t=g(L,[["render",vt]]);export{$t as default};
