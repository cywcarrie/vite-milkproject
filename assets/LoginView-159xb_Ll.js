import{_,i as f,u as h,f as b,g as v,r as g,o as w,c as x,b as V,a as e,h as P,j as p,v as m,F as y,S as c,e as E}from"./index-B9ihJxSl.js";import{V as A}from"./VueLoading-BiyQmFRl.js";var I={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:L}=I,k={components:{VueLoading:A},setup(){const i=f("$axios"),t=h(),r=b({username:"",password:""}),s=v(!1);function d(){s.value=!0;const l=`${L}admin/signin`;i.post(l,r).then(a=>{if(a.data.success){const{token:o,expired:n}=a.data;document.cookie=`hexToken=${o}; expires=${new Date(n)}; path=/`,i.defaults.headers.common.Authorization=o,c("success","登入成功"),t.push("/admin/products")}else c("error","登入失敗")}).catch(a=>{var n,u;const o=((u=(n=a.response)==null?void 0:n.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";c("error",o)}).finally(()=>{s.value=!1})}return{user:r,isLoading:s,signIn:d}}},T={class:"container my-5 py-5"},S={class:"col-md-7 col-lg-4 bg-light p-5 rounded-2"},D=e("h2",{class:"h3 mb-3 text-center text-nowrap font-weight-normal fw-bold text-primary"},[e("i",{class:"bi bi-person-circle pe-2"}),E("管理者後台登入 ")],-1),j={class:"mb-2"},B=e("label",{for:"inputEmail",class:"visually-hidden"},"Email",-1),N={class:"mb-2"},R=e("label",{for:"inputPassword",class:"visually-hidden"},"密碼",-1),M={class:"text-center mt-4"},U=["disabled"];function q(i,t,r,s,d,l){const a=g("VueLoading");return w(),x(y,null,[V(a,{active:s.isLoading},null,8,["active"]),e("div",T,[e("form",{class:"row justify-content-center py-5 px-3",onSubmit:t[2]||(t[2]=P((...o)=>s.signIn&&s.signIn(...o),["prevent"]))},[e("div",S,[D,e("div",j,[B,p(e("input",{type:"email",id:"inputEmail",class:"form-control",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":t[0]||(t[0]=o=>s.user.username=o)},null,512),[[m,s.user.username]])]),e("div",N,[R,p(e("input",{type:"password",id:"inputPassword",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>s.user.password=o)},null,512),[[m,s.user.password]])]),e("div",M,[e("button",{class:"btn btn-secondary btn-block px-4 fw-bold",type:"submit",disabled:s.isLoading}," 登入 ",8,U)])])],32)])],64)}const z=_(k,[["render",q]]);export{z as default};
