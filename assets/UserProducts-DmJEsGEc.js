import{_ as S,j as D,s as I,k as R,u as B,l as p,m as j,n as F,r as k,o as s,c,b as v,a as t,w as x,p as f,e as r,F as m,q as w,g as $,v as M,t as n,x as u,i as U,S as q}from"./index-If2eL0tu.js";import{V as H}from"./VueLoading-D62Lhxuy.js";import{F as O}from"./FooterComponent-DHjU0z8R.js";var z={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:G,VITE_APP_PATH:J}=z,K={components:{VueLoading:H,FooterComponent:O},setup(){const i=D(),{isDone:a}=I(i),{addCart:C}=i,o=R(),P=B(),_=p([]),g=p(""),b=p([]),y=p(""),e=p(!1),d=p("");function T(){const l=`${G}api/${J}/products/all`;g.value="",e.value=!0,U.get(l).then(h=>{if(e.value=!1,h.data.success){_.value=h.data.products,N();const{productCategory:V}=o.params;V&&(y.value=V)}}).catch(h=>{q("error",`${h.response.data.message}`)})}function N(){const l=new Set;_.value.forEach(h=>{l.add(h.category)}),b.value=[...l]}function A(l){P.push(`/product/${l}`)}const E=j(()=>_.value.filter(l=>l.category.match(y.value))),L=j(()=>_.value.filter(l=>l.title.match(g.value)));return F(()=>{T()}),{products:_,search:g,categories:b,selectCategory:y,isLoading:e,id:d,getProduct:A,getProducts:T,filterProducts:E,searchProducts:L,isDone:a,addCart:C}}},Q={class:"mb-5"},W={class:"container"},X=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"我們的商品")],-1),Y={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},Z={class:"breadcrumb"},tt={class:"breadcrumb-item"},et=t("li",{class:"breadcrumb-item active","aria-current":"page"},"商品列表",-1),ot={class:"row my-5"},st={class:"col-lg-3 mb-4 mb-lg-0"},ct={class:"d-none d-md-block"},rt=t("h3",{class:"text-start pb-3 fw-bold fs-4 border-bottom border-primary border-2"}," 商品系列 ",-1),nt={class:"list-group list-group-flush text-start"},it=t("i",{class:"bi bi-house-heart me-2"},null,-1),at=["onClick"],lt=t("i",{class:"bi bi-house-heart me-2"},null,-1),dt={class:"dropdown d-block d-md-none w-100"},ut=t("button",{class:"btn btn-secondary dropdown-toggle w-100 fw-bold",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," 商品系列 ",-1),_t={class:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton1"},bt=t("i",{class:"bi bi-house-heart me-2"},null,-1),ht=["onClick"],pt=t("i",{class:"bi bi-house-heart me-2"},null,-1),ft={class:"input-group mt-4 mb-3"},gt={key:0,class:"col-lg-9"},yt={class:"mb-3"},vt={class:"fs-5"},mt={class:"fs-4 text-primary fw-bold"},wt=t("i",{class:"bi bi-x-circle pe-1"},null,-1),kt={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3"},xt={class:"card product-card w-100 h-100"},Ct=["onClick"],Pt=["src"],Tt=t("span",{class:"seemore-text d-flex justify-content-center align-items-center text-white fw-bold"},[t("i",{class:"bi bi-search pe-1"}),r(" 查看更多 ")],-1),Vt={class:"card-body p-3"},jt={class:"d-flex justify-content-start text-primary fw-bold"},Nt=t("i",{class:"bi bi-house-heart me-2"},null,-1),At={class:"card-title fw-bolder text-primary mb-3"},Et={class:"d-flex justify-content-between align-items-center mb-3"},Lt={key:0,class:"h5 text-secondary"},St={key:1,class:"h6 text-secondary"},Dt={key:2,class:"h5 text-primary fw-bold"},It={class:"card-footer border-0 bg-transparent pt-0 pb-3"},Rt=["onClick"],Bt=t("i",{class:"bi bi-cart-fill"},null,-1),Ft={key:0,class:"col text-center mt-5"},$t=t("h2",{class:"fw-bolder"},"查無商品",-1),Mt=t("i",{class:"bi bi-bag-x fs-1"},null,-1),Ut=[$t,Mt],qt={key:1,class:"col-lg-9"},Ht={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3"},Ot={class:"card product-card w-100 h-100"},zt=["onClick"],Gt=["src"],Jt=t("span",{class:"seemore-text d-flex justify-content-center align-items-center text-white fw-bold"},[t("i",{class:"bi bi-search pe-1"}),r(" 查看更多 ")],-1),Kt={class:"card-body p-3"},Qt={class:"d-flex justify-content-start text-primary fw-bold"},Wt=t("i",{class:"bi bi-house-heart me-2"},null,-1),Xt={class:"card-title fw-bolder text-primary mb-3"},Yt={class:"d-flex justify-content-between align-items-center mb-3"},Zt={key:0,class:"h5 text-secondary"},te={key:1,class:"h6 text-secondary"},ee={key:2,class:"h5 text-primary fw-bold"},oe={class:"card-footer border-0 bg-transparent pt-0 pb-3"},se=["onClick"],ce=t("i",{class:"bi bi-cart-fill"},null,-1);function re(i,a,C,o,P,_){const g=k("VueLoading"),b=k("RouterLink"),y=k("FooterComponent");return s(),c(m,null,[v(g,{active:o.isLoading},null,8,["active"]),t("section",Q,[t("div",W,[X,t("nav",Y,[t("ol",Z,[t("li",tt,[v(b,{to:"/",class:"text-dark hover-nav fw-bold"},{default:x(()=>[r("首頁")]),_:1})]),et])]),t("div",ot,[t("div",st,[t("div",ct,[rt,t("div",nt,[t("button",{type:"button",class:f(["list-group-item list-group-item-action fw-bold",{active:o.selectCategory===""}]),"aria-current":"true",onClick:a[0]||(a[0]=e=>o.selectCategory="")},[it,r(" 全部商品 ")],2),(s(!0),c(m,null,w(o.categories,e=>(s(),c("button",{key:e,type:"button",class:f(["list-group-item list-group-item-action fw-bold",{active:e===o.selectCategory}]),onClick:d=>o.selectCategory=e},[lt,r(" 只想喝"+n(e),1)],10,at))),128))])]),t("div",dt,[ut,t("ul",_t,[t("li",null,[t("button",{onClick:a[1]||(a[1]=e=>o.selectCategory=""),class:f([{active:o.selectCategory===""},"dropdown-item fw-bold"]),type:"button"},[bt,r("全部商品 ")],2)]),t("li",null,[(s(!0),c(m,null,w(o.categories,e=>(s(),c("button",{key:e,class:f([{active:e===o.selectCategory},"dropdown-item fw-bold"]),onClick:d=>o.selectCategory=e,type:"button"},[pt,r("只想喝"+n(e),1)],10,ht))),128))])])]),t("div",ft,[$(t("input",{type:"text",class:"form-control border border-primary border-2 rounded-0",placeholder:"請輸入搜尋商品","onUpdate:modelValue":a[2]||(a[2]=e=>o.search=e)},null,512),[[M,o.search]])])]),o.search?(s(),c("div",gt,[t("div",yt,[t("div",vt,[r(" 以下為您顯示 "),t("span",mt,n(o.search),1),r(" 的結果 "),t("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-2",onClick:a[3]||(a[3]=e=>o.getProducts())},[wt,r("取消搜尋 ")])])]),t("div",kt,[(s(!0),c(m,null,w(o.searchProducts,e=>(s(),c("div",{class:"col mb-4",key:e.id},[t("div",xt,[v(b,{to:`/product/${e.id}`},{default:x(()=>[t("div",{class:"product-img cursor-pointer",onClick:d=>o.getProduct(e.id)},[t("img",{src:e.imageUrl,class:"card-img-top object-fit-cover",alt:"productImages"},null,8,Pt),Tt],8,Ct),t("div",Vt,[t("div",jt,[t("p",null,[Nt,r("只想喝"+n(e.category),1)])]),t("h5",At,n(e.title),1),t("div",Et,[e.price?u("",!0):(s(),c("div",Lt," NT$"+n(i.$filters.currency(e.origin_price)),1)),e.price?(s(),c("del",St,"NT$"+n(i.$filters.currency(e.origin_price)),1)):u("",!0),e.price?(s(),c("div",Dt," NT$"+n(i.$filters.currency(e.price)),1)):u("",!0)])])]),_:2},1032,["to"]),t("div",It,[t("button",{type:"button",class:f(["btn btn-outline-primary w-100",{disabled:o.isDone===e.id}]),onClick:d=>o.addCart(e.id,i.qty)},[Bt,r(" 加入購物車 ")],10,Rt)])])]))),128))]),o.searchProducts.length===0?(s(),c("div",Ft,Ut)):u("",!0)])):(s(),c("div",qt,[t("div",Ht,[(s(!0),c(m,null,w(o.filterProducts,e=>(s(),c("div",{class:"col mb-4",key:e.id},[t("div",Ot,[v(b,{to:`/product/${e.id}`},{default:x(()=>[t("div",{class:"product-img cursor-pointer",onClick:d=>o.getProduct(e.id)},[t("img",{src:e.imageUrl,class:"card-img-top object-fit-cover",alt:"productImages"},null,8,Gt),Jt],8,zt),t("div",Kt,[t("div",Qt,[t("p",null,[Wt,r("只想喝"+n(e.category),1)])]),t("h5",Xt,n(e.title),1),t("div",Yt,[e.price?u("",!0):(s(),c("div",Zt," NT$"+n(i.$filters.currency(e.origin_price)),1)),e.price?(s(),c("del",te,"NT$"+n(i.$filters.currency(e.origin_price)),1)):u("",!0),e.price?(s(),c("div",ee," NT$"+n(i.$filters.currency(e.price)),1)):u("",!0)])])]),_:2},1032,["to"]),t("div",oe,[t("button",{type:"button",class:f(["btn btn-outline-primary w-100",{disabled:o.isDone===e.id}]),onClick:d=>o.addCart(e.id,i.qty)},[ce,r(" 加入購物車 ")],10,se)])])]))),128))])]))])])]),v(y)],64)}const le=S(K,[["render",re]]);export{le as default};
