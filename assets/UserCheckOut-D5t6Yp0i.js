import{_ as P,R as C,m as E,h as b,S,i as A,r as i,o as c,c as d,b as o,a as e,F as p,j as F,t as m,k as g,w as v,d as L,e as n,n as h,f as T,v as I}from"./index-CLJaB914.js";import{F as R}from"./FooterComponent-DNB_w0Xc.js";var U={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:B,VITE_APP_PATH:j}=U,q={components:{RouterLink:C,FooterComponent:R},data(){return{isLoading:!1,total:0,final_total:0,form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:""}},methods:{...E(b,["getCart"]),createOrder(){const t=`${B}api/${j}/order`,s=this.form;this.$http.post(t,{data:s}).then(u=>{this.$router.push(`/checkorder/${u.data.orderId}`),this.getCart()}).catch(u=>{S.fire({position:"top-end",icon:"error",title:`${u.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})}},computed:{...A(b,["cart"])},created(){this.getCart()}},D={class:"mb-5"},N={class:"container"},O=L('<div class="d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"><h2 class="position-absolute text-center text-white fw-bolder banner-title">結帳流程</h2></div><div class="d-flex justify-content-center align-items-center my-5 mt-3"><h5 class="fw-bold mb-0 text-secondary pay-header active">填寫資料</h5><i class="bi bi-caret-right-fill fs-5 mx-2 text-secondary"></i><h5 class="fw-bold mb-0 text-secondary pay-header">確認付款</h5><i class="bi bi-caret-right-fill fs-5 mx-2 text-secondary"></i><h5 class="fw-bold mb-0 text-secondary pay-header">訂單完成</h5></div>',2),M={class:"row my-5 py-5 bg-light rounded-2"},H={class:"col-lg-7"},z=e("h2",{class:"text-center fw-bold mb-4"},"商品明細",-1),$={class:"table-responsive-md mb-5 mb-lg-0"},G={class:"table align-middle table-light table-borderless"},J=e("thead",{class:"text-center table-secondary"},[e("tr",{class:"table-nowrap"},[e("th",null,"商品名稱"),e("th",{class:"text-nowrap"},"數量"),e("th",{class:"text-end"},"價格")])],-1),K={class:"text-center"},Q={class:"table-nowrap fw-bold text-primary"},W={class:"text-end text-nowrap"},X={key:0,class:"text-success text-end"},Y=e("td",{colspan:"2",class:"text-end fs-5"},"總計",-1),Z={class:"text-end fs-5 text-primary fw-bold"},ee={key:0},te=e("td",{colspan:"2",class:"text-end text-success fs-5"},"優惠價",-1),se={class:"text-end text-success fs-5 fw-bold"},oe={class:"row col-lg-5"},le=e("h2",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),ae={class:"mb-3"},re=e("label",{for:"email",class:"form-label"},[n("Email"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),ne={class:"mb-3"},ie=e("label",{for:"name",class:"form-label"},[n("訂購人姓名"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),ce={class:"mb-3"},de=e("label",{for:"tel",class:"form-label"},[n("訂購人電話"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),me={class:"mb-3"},ue=e("label",{for:"address",class:"form-label"},[n("訂購人地址"),e("small",{class:"ps-1 text-danger"},"(必填)")],-1),fe={class:"mb-3"},_e=e("label",{for:"message",class:"form-label"},"留言",-1),he={class:"d-flex justify-content-between"},be=e("i",{class:"bi bi-caret-left-fill"},null,-1),pe=e("button",{type:"submit",class:"btn btn-secondary check-btn"},[n("確認訂單"),e("i",{class:"bi bi-caret-right-fill"})],-1);function ge(t,s,u,ve,l,x){const y=i("LoadingVue"),f=i("FieldVue"),_=i("ErrorMessage"),V=i("RouterLink"),w=i("FormVue"),k=i("FooterComponent");return c(),d(p,null,[o(y,{active:l.isLoading,loader:"spinner",color:"#fca311",width:70,height:70},null,8,["active"]),e("section",D,[e("div",N,[O,e("div",M,[e("div",H,[z,e("div",$,[e("table",G,[J,e("tbody",K,[(c(!0),d(p,null,F(t.cart.carts,a=>(c(),d("tr",{class:"table-nowrap",key:a.id},[e("td",Q,m(a.product.title),1),e("td",null,m(a.qty),1),e("td",W,[t.cart.final_total!==t.cart.total?(c(),d("small",X,"優惠價：")):g("",!0),n(" "+m(t.$filters.currency(a.final_total)),1)])]))),128))]),e("tfoot",null,[e("tr",null,[Y,e("td",Z,m(t.$filters.currency(t.cart.total)),1)]),t.cart.final_total!==t.cart.total?(c(),d("tr",ee,[te,e("td",se,m(t.$filters.currency(t.cart.final_total)),1)])):g("",!0)])])])]),e("div",oe,[le,o(w,{onSubmit:x.createOrder},{default:v(({errors:a})=>[e("div",ae,[re,o(f,{id:"email",name:"email",type:"email",class:h(["form-control",{"is-invalid":a.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=r=>l.form.user.email=r)},null,8,["class","modelValue"]),o(_,{name:"email",class:"invalid-feedback"})]),e("div",ne,[ie,o(f,{id:"name",name:"姓名",type:"text",class:h(["form-control",{"is-invalid":a.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=r=>l.form.user.name=r)},null,8,["class","modelValue"]),o(_,{name:"姓名",class:"invalid-feedback"})]),e("div",ce,[de,o(f,{id:"tel",name:"電話",type:"tel",class:h(["form-control",{"is-invalid":a.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:l.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=r=>l.form.user.tel=r)},null,8,["class","modelValue"]),o(_,{name:"電話",class:"invalid-feedback"})]),e("div",me,[ue,o(f,{id:"address",name:"地址",type:"text",class:h(["form-control",{"is-invalid":a.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=r=>l.form.user.address=r)},null,8,["class","modelValue"]),o(_,{name:"地址",class:"invalid-feedback"})]),e("div",fe,[_e,T(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=r=>l.form.message=r)},null,512),[[I,l.form.message]])]),e("div",he,[o(V,{class:"btn btn-outline-primary",to:"/cart"},{default:v(()=>[be,n("回上一頁")]),_:1}),pe])]),_:1},8,["onSubmit"])])])])]),o(k)],64)}const Ve=P(q,[["render",ge]]);export{Ve as default};
