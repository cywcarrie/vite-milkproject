import{_ as g,R as v,S as h,r as d,o,c as r,b as l,a as t,n as p,k as i,g as k,F as u,j as P,t as n,w as I,e as m}from"./index-B_3VajgM.js";import{F as V}from"./FooterComponent-DRdevdWl.js";var C={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:b,VITE_APP_PATH:f}=C,A={components:{RouterLink:v,FooterComponent:V},data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const a=`${b}api/${f}/order/${this.orderId}`;this.$http.get(a).then(s=>{s.data.success&&(this.order=s.data.order)}).catch(s=>{h.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})},payOrder(){const a=`${b}api/${f}/pay/${this.orderId}`;this.$http.post(a).then(s=>{s.data.success&&this.getOrder()}).catch(s=>{h.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},E={class:"mb-5"},L={class:"container"},O=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"結帳流程")],-1),B={class:"d-flex justify-content-center align-items-center mb-5 mt-3"},j=t("h5",{class:"fw-bold mb-0 text-secondary pay-header"},"填寫資料",-1),R=t("i",{class:"bi bi-caret-right-fill fs-5 mx-2 text-secondary"},null,-1),S=t("i",{class:"bi bi-caret-right-fill fs-5 mx-2 text-secondary"},null,-1),T={class:"row justify-content-center align-items-center"},F={class:"col-md-10"},D={key:0,class:"d-flex justify-content-center align-items-center"},N=t("i",{class:"bi bi-check-circle-fill fs-2 pe-2 text-success"},null,-1),H=t("h2",{class:"fw-bold mb-0 text-success"},"付款成功 !",-1),M=[N,H],U={key:1,class:"fw-bold mt-4 mb-5 text-center"},q={class:"my-5 row justify-content-center"},z=t("h3",{class:"text-center fw-bold mb-4"},"訂單明細",-1),G={class:"table align-middle table-light table-borderless mb-4"},J=t("thead",{class:"text-center bg-light"},[t("th",{class:"text-nowrap"},"商品名稱"),t("th",{class:"text-center text-nowrap"},"數量"),t("th",{class:"text-nowrap"},"價格")],-1),K={class:"text-center text-primary fw-bold"},Q={class:"text-center text-nowrap"},W={class:"text-center text-nowrap"},X=t("td",{colspan:"2",class:"text-end text-nowrap"},"總計",-1),Y={class:"fs-5 text-primary fw-bold text-nowrap"},Z=t("h3",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),$={class:"table table-light table-borderless mb-4"},tt={class:"table-nowrap"},et=t("th",{width:"100",class:"text-nowrap"},"Email",-1),st={class:"text-nowrap"},ot={class:"table-nowrap"},rt=t("th",{class:"text-nowrap"},"姓名",-1),nt={class:"text-nowrap"},ct={class:"table-nowrap"},at=t("th",{class:"text-nowrap"},"電話",-1),it={class:"text-nowrap"},dt={class:"table-nowrap"},lt=t("th",null,"地址",-1),_t={class:"text-nowrap"},ht={class:"table-nowrap"},pt=t("th",null,"付款狀態",-1),ut={key:0,class:"text-nowrap text-danger fw-bold"},bt={key:1,class:"text-success fw-bold text-nowrap"},ft={key:0,class:"text-end"},mt=t("button",{class:"btn btn-primary ms-auto",type:"submit"},[m("確認付款"),t("i",{class:"bi bi-caret-right-fill"})],-1),xt=[mt],wt={key:1,class:"text-end"},yt=t("i",{class:"bi bi-cart4 pe-1 fs-5"},null,-1);function gt(a,s,vt,kt,e,_){const x=d("LoadingVue"),w=d("RouterLink"),y=d("FooterComponent");return o(),r(u,null,[l(x,{active:e.isLoading,loader:"spinner",color:"#fca311",width:70,height:70},null,8,["active"]),t("section",E,[t("div",L,[O,t("div",B,[j,R,t("h5",{class:p(["fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!1}])},"確認付款",2),S,t("h5",{class:p(["fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!0}])},"訂單完成",2)]),t("div",T,[t("div",F,[e.order.is_paid===!0?(o(),r("div",D,M)):i("",!0),e.order.is_paid===!0?(o(),r("h6",U,"感謝您的訂購，訂單明細將會寄送至您的電子信箱 !")):i("",!0),t("div",q,[z,t("form",{class:"col-lg-6",onSubmit:s[0]||(s[0]=k((...c)=>_.payOrder&&_.payOrder(...c),["prevent"]))},[t("table",G,[J,t("tbody",null,[(o(!0),r(u,null,P(e.order.products,c=>(o(),r("tr",{key:c.id},[t("td",K,n(c.product.title),1),t("td",Q,n(c.qty)+"/"+n(c.product.unit),1),t("td",W,n(c.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[X,t("td",Y,n(e.order.total),1)])])]),Z,t("table",$,[t("tbody",null,[t("tr",tt,[et,t("td",st,n(e.order.user.email),1)]),t("tr",ot,[rt,t("td",nt,n(e.order.user.name),1)]),t("tr",ct,[at,t("td",it,n(e.order.user.tel),1)]),t("tr",dt,[lt,t("td",_t,n(e.order.user.address),1)]),t("tr",ht,[pt,t("td",null,[e.order.is_paid?(o(),r("span",bt,"付款完成")):(o(),r("span",ut,"尚未付款"))])])])]),e.order.is_paid===!1?(o(),r("div",ft,xt)):i("",!0),e.order.is_paid===!0?(o(),r("div",wt,[l(w,{to:"/products",class:"btn btn-primary ms-auto"},{default:I(()=>[yt,m("繼續選購")]),_:1})])):i("",!0)],32)])])])])]),l(y)],64)}const Vt=g(A,[["render",gt]]);export{Vt as default};
