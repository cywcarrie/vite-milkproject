import{V as g}from"./VueLoading-vB_YFBM3.js";import{F as v}from"./FooterComponent-C-bIwhUO.js";import{_ as k,S as h,r as l,o,c as r,b as d,a as t,n as p,k as a,g as P,F as u,j as V,t as n,w as I,e as f}from"./index-B3uW6wCA.js";var A={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:b,VITE_APP_PATH:m}=A,E={components:{VueLoading:g,FooterComponent:v},data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const c=`${b}api/${m}/order/${this.orderId}`;this.$http.get(c).then(s=>{s.data.success&&(this.order=s.data.order)}).catch(s=>{h("error",`${s.response.data.message}`)})},payOrder(){const c=`${b}api/${m}/pay/${this.orderId}`;this.$http.post(c).then(s=>{s.data.success&&this.getOrder()}).catch(s=>{h("error",`${s.response.data.message}`)})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},L={class:"mb-5"},O={class:"container"},C=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"結帳流程")],-1),j={class:"d-flex justify-content-center align-items-center mb-5 mt-3"},S=t("h5",{class:"d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header"},[t("i",{class:"bi bi-1-circle mb-1"}),t("span",null,"填寫資料")],-1),T=t("i",{class:"bi bi-caret-right-fill fs-5 mx-1 mx-md-2 text-secondary"},null,-1),F=t("i",{class:"bi bi-2-circle mb-1"},null,-1),N=t("span",null,"確認訂單",-1),R=[F,N],B=t("i",{class:"bi bi-caret-right-fill fs-5 mx-1 mx-md-2 text-secondary"},null,-1),D=t("i",{class:"bi bi-3-circle mb-1"},null,-1),H=t("span",null,"訂單完成",-1),M=[D,H],U={class:"row justify-content-center align-items-center"},q={class:"col-md-10"},z={key:0,class:"d-flex justify-content-center align-items-center mt-5"},$=t("i",{class:"bi bi-bag-check-fill fs-2 pe-2 text-success"},null,-1),G=t("h2",{class:"fw-bold mb-0 text-success"},"訂購成功 !",-1),J=[$,G],K={key:1,class:"fw-bold mt-4 mb-5 text-center"},Q={class:"my-5 row justify-content-center"},W=t("h3",{class:"text-center fw-bold mb-4"},"訂單明細",-1),X={class:"table align-middle table-light table-borderless mb-4"},Y=t("thead",{class:"text-center"},[t("tr",null,[t("th",{class:"text-nowrap"},"商品名稱"),t("th",{class:"text-center text-nowrap"},"數量"),t("th",{class:"text-nowrap"},"價格")])],-1),Z={class:"text-center"},tt={class:"text-center text-nowrap"},et={class:"text-center text-nowrap"},st=t("td",{colspan:"2",class:"text-end text-nowrap"},"總計",-1),ot={class:"fs-5 text-primary fw-bold text-nowrap"},rt=t("h3",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),nt={class:"table table-light table-borderless mb-4"},ct={class:"table-nowrap"},it=t("th",{class:"text-nowrap"},"姓名",-1),at={class:"text-nowrap"},lt={class:"table-nowrap"},dt=t("th",{width:"100",class:"text-nowrap"},"Email",-1),_t={class:"text-nowrap"},ht={class:"table-nowrap"},pt=t("th",{class:"text-nowrap"},"電話",-1),ut={class:"text-nowrap"},bt={class:"table-nowrap"},mt=t("th",{class:"text-nowrap"},"付款方式",-1),ft={class:"text-nowrap"},xt={class:"table-nowrap"},wt=t("th",null,"訂購狀態",-1),yt={key:0,class:"text-nowrap text-danger fw-bold"},gt={key:1,class:"text-success fw-bold text-nowrap"},vt={key:0,class:"text-end"},kt=t("button",{class:"btn btn-primary ms-auto",type:"submit"},[f(" 確認訂購"),t("i",{class:"bi bi-caret-right-fill"})],-1),Pt=[kt],Vt={key:1,class:"text-end"},It=t("i",{class:"bi bi-cart4 pe-1 fs-5"},null,-1);function At(c,s,Et,Lt,e,_){const x=l("VueLoading"),w=l("RouterLink"),y=l("FooterComponent");return o(),r(u,null,[d(x,{active:e.isLoading},null,8,["active"]),t("section",L,[t("div",O,[C,t("div",j,[S,T,t("h5",{class:p(["d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!1}])},R,2),B,t("h5",{class:p(["d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!0}])},M,2)]),t("div",U,[t("div",q,[e.order.is_paid===!0?(o(),r("div",z,J)):a("",!0),e.order.is_paid===!0?(o(),r("h6",K," 感謝您的訂購，訂單明細將會寄送至您的電子信箱 ! ")):a("",!0),t("div",Q,[W,t("form",{class:"col-lg-6",onSubmit:s[0]||(s[0]=P((...i)=>_.payOrder&&_.payOrder(...i),["prevent"]))},[t("table",X,[Y,t("tbody",null,[(o(!0),r(u,null,V(e.order.products,i=>(o(),r("tr",{key:i.id},[t("td",Z,n(i.product.title),1),t("td",tt,n(i.qty),1),t("td",et,n(c.$filters.currency(i.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[st,t("td",ot,n(c.$filters.currency(e.order.total)),1)])])]),rt,t("table",nt,[t("tbody",null,[t("tr",ct,[it,t("td",at,n(e.order.user.name),1)]),t("tr",lt,[dt,t("td",_t,n(e.order.user.email),1)]),t("tr",ht,[pt,t("td",ut,n(e.order.user.tel),1)]),t("tr",bt,[mt,t("td",ft,n(e.order.user.pay),1)]),t("tr",xt,[wt,t("td",null,[e.order.is_paid?(o(),r("span",gt,"訂購完成")):(o(),r("span",yt,"尚未訂購"))])])])]),e.order.is_paid===!1?(o(),r("div",vt,Pt)):a("",!0),e.order.is_paid===!0?(o(),r("div",Vt,[d(w,{to:"/products",class:"btn btn-primary ms-auto"},{default:I(()=>[It,f("繼續選購")]),_:1})])):a("",!0)],32)])])])])]),d(y)],64)}const St=k(E,[["render",At]]);export{St as default};
