import{F as g}from"./FooterComponent-BrYG6ppx.js";import{_ as v,S as h,r as l,o,c as r,b as d,a as t,n as p,k as a,g as k,F as u,j as P,t as n,w as I,e as f}from"./index-ChCCX6HX.js";var V={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:b,VITE_APP_PATH:m}=V,C={components:{FooterComponent:g},data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const c=`${b}api/${m}/order/${this.orderId}`;this.$http.get(c).then(s=>{s.data.success&&(this.order=s.data.order)}).catch(s=>{h.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})},payOrder(){const c=`${b}api/${m}/pay/${this.orderId}`;this.$http.post(c).then(s=>{s.data.success&&this.getOrder()}).catch(s=>{h.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,timer:1500,toast:!0,color:"#14213d",background:"#fef8e2",showConfirmButton:!1,timerProgressBar:!0})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},A={class:"mb-5"},E={class:"container"},O=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"結帳流程")],-1),B={class:"d-flex justify-content-center align-items-center mb-5 mt-3"},L=t("h5",{class:"d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header"},[t("i",{class:"bi bi-1-circle mb-1"}),t("span",null,"填寫資料")],-1),j=t("i",{class:"bi bi-caret-right-fill fs-5 mx-1 mx-md-2 text-secondary"},null,-1),S=t("i",{class:"bi bi-2-circle mb-1"},null,-1),T=t("span",null,"確認訂單",-1),F=[S,T],R=t("i",{class:"bi bi-caret-right-fill fs-5 mx-1 mx-md-2 text-secondary"},null,-1),D=t("i",{class:"bi bi-3-circle mb-1"},null,-1),N=t("span",null,"訂單完成",-1),H=[D,N],M={class:"row justify-content-center align-items-center"},U={class:"col-md-10"},q={key:0,class:"d-flex justify-content-center align-items-center mt-5"},z=t("i",{class:"bi bi-bag-check-fill fs-2 pe-2 text-success"},null,-1),$=t("h2",{class:"fw-bold mb-0 text-success"},"訂購成功 !",-1),G=[z,$],J={key:1,class:"fw-bold mt-4 mb-5 text-center"},K={class:"my-5 row justify-content-center"},Q=t("h3",{class:"text-center fw-bold mb-4"},"訂單明細",-1),W={class:"table align-middle table-light table-borderless mb-4"},X=t("thead",{class:"text-center"},[t("tr",null,[t("th",{class:"text-nowrap"},"商品名稱"),t("th",{class:"text-center text-nowrap"},"數量"),t("th",{class:"text-nowrap"},"價格")])],-1),Y={class:"text-center"},Z={class:"text-center text-nowrap"},tt={class:"text-center text-nowrap"},et=t("td",{colspan:"2",class:"text-end text-nowrap"},"總計",-1),st={class:"fs-5 text-primary fw-bold text-nowrap"},ot=t("h3",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),rt={class:"table table-light table-borderless mb-4"},nt={class:"table-nowrap"},ct=t("th",{class:"text-nowrap"},"姓名",-1),it={class:"text-nowrap"},at={class:"table-nowrap"},lt=t("th",{width:"100",class:"text-nowrap"},"Email",-1),dt={class:"text-nowrap"},_t={class:"table-nowrap"},ht=t("th",{class:"text-nowrap"},"電話",-1),pt={class:"text-nowrap"},ut={class:"table-nowrap"},bt=t("th",{class:"text-nowrap"},"付款方式",-1),mt={class:"text-nowrap"},ft={class:"table-nowrap"},xt=t("th",null,"訂購狀態",-1),wt={key:0,class:"text-nowrap text-danger fw-bold"},yt={key:1,class:"text-success fw-bold text-nowrap"},gt={key:0,class:"text-end"},vt=t("button",{class:"btn btn-primary ms-auto",type:"submit"},[f(" 確認訂購"),t("i",{class:"bi bi-caret-right-fill"})],-1),kt=[vt],Pt={key:1,class:"text-end"},It=t("i",{class:"bi bi-cart4 pe-1 fs-5"},null,-1);function Vt(c,s,Ct,At,e,_){const x=l("LoadingVue"),w=l("RouterLink"),y=l("FooterComponent");return o(),r(u,null,[d(x,{active:e.isLoading,loader:"spinner",color:"#fca311",width:70,height:70},null,8,["active"]),t("section",A,[t("div",E,[O,t("div",B,[L,j,t("h5",{class:p(["d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!1}])},F,2),R,t("h5",{class:p(["d-flex flex-column text-center fw-bold mb-0 text-secondary pay-header",{active:e.order.is_paid===!0}])},H,2)]),t("div",M,[t("div",U,[e.order.is_paid===!0?(o(),r("div",q,G)):a("",!0),e.order.is_paid===!0?(o(),r("h6",J," 感謝您的訂購，訂單明細將會寄送至您的電子信箱 ! ")):a("",!0),t("div",K,[Q,t("form",{class:"col-lg-6",onSubmit:s[0]||(s[0]=k((...i)=>_.payOrder&&_.payOrder(...i),["prevent"]))},[t("table",W,[X,t("tbody",null,[(o(!0),r(u,null,P(e.order.products,i=>(o(),r("tr",{key:i.id},[t("td",Y,n(i.product.title),1),t("td",Z,n(i.qty),1),t("td",tt,n(c.$filters.currency(i.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[et,t("td",st,n(c.$filters.currency(e.order.total)),1)])])]),ot,t("table",rt,[t("tbody",null,[t("tr",nt,[ct,t("td",it,n(e.order.user.name),1)]),t("tr",at,[lt,t("td",dt,n(e.order.user.email),1)]),t("tr",_t,[ht,t("td",pt,n(e.order.user.tel),1)]),t("tr",ut,[bt,t("td",mt,n(e.order.user.pay),1)]),t("tr",ft,[xt,t("td",null,[e.order.is_paid?(o(),r("span",yt,"訂購完成")):(o(),r("span",wt,"尚未訂購"))])])])]),e.order.is_paid===!1?(o(),r("div",gt,kt)):a("",!0),e.order.is_paid===!0?(o(),r("div",Pt,[d(w,{to:"/products",class:"btn btn-primary ms-auto"},{default:I(()=>[It,f("繼續選購")]),_:1})])):a("",!0)],32)])])])])]),d(y)],64)}const Bt=v(C,[["render",Vt]]);export{Bt as default};
