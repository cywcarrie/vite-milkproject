import{_ as $,i as B,k as F,s as M,l as U,u as q,g as p,m as A,n as H,r as k,o as s,c,b as m,a as t,w as C,p as f,e as r,F as g,q as w,j as O,v as z,t as n,x as b,S as G}from"./index-LFUCP_DM.js";import{V as J}from"./VueLoading-DMQ7Mgdv.js";import{F as K}from"./FooterComponent-CDHpfRxj.js";var Q={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb",BASE_URL:"/vite-milkproject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API:W,VITE_APP_PATH:X}=Q,Y={components:{VueLoading:J,FooterComponent:K},setup(){const i=B("$axios"),a=F(),{isDone:P}=M(a),{addCart:e}=a,T=U(),V=q(),_=p([]),u=p(""),y=p([]),o=p(""),d=p(!1),E=p("");function x(){const l=`${W}api/${X}/products/all`;u.value="",d.value=!0,i.get(l).then(h=>{if(h.data.success){_.value=h.data.products,j();const{productCategory:v}=T.params;v&&(o.value=v)}}).catch(h=>{var N,S;const v=((S=(N=h.response)==null?void 0:N.data)==null?void 0:S.message)||"發生錯誤，請稍後再試";G("error",v)}).finally(()=>{d.value=!1})}function j(){const l=new Set;_.value.forEach(h=>{l.add(h.category)}),y.value=[...l]}function L(){u.value="",o.value="",x()}function D(l){V.push(`/product/${l}`)}const I=A(()=>_.value.filter(l=>l.category.match(o.value))),R=A(()=>_.value.filter(l=>l.title.match(u.value)));return H(()=>{x()}),{products:_,search:u,categories:y,selectCategory:o,isLoading:d,id:E,cancelSearch:L,getCategories:j,getProduct:D,getProducts:x,filterProducts:I,searchProducts:R,isDone:P,addCart:e}}},Z={class:"mb-5"},tt={class:"container"},ot=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"我們的商品")],-1),et={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},st={class:"breadcrumb"},ct={class:"breadcrumb-item"},rt=t("li",{class:"breadcrumb-item active","aria-current":"page"},"商品列表",-1),nt={class:"row my-5"},at={class:"col-lg-3 mb-4 mb-lg-0"},it={class:"d-none d-md-block"},lt=t("h3",{class:"text-start pb-3 fw-bold fs-4 border-bottom border-primary border-2"}," 商品系列 ",-1),dt={class:"list-group list-group-flush text-start"},ut=t("i",{class:"bi bi-house-heart me-2"},null,-1),_t=["onClick"],bt=t("i",{class:"bi bi-house-heart me-2"},null,-1),ht={class:"dropdown d-block d-md-none w-100"},pt=t("button",{class:"btn btn-secondary dropdown-toggle w-100 fw-bold",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," 商品系列 ",-1),ft={class:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton1"},mt=t("i",{class:"bi bi-house-heart me-2"},null,-1),gt=["onClick"],yt=t("i",{class:"bi bi-house-heart me-2"},null,-1),vt={class:"input-group mt-4 mb-3"},wt={key:0,class:"col-lg-9"},xt={class:"mb-3"},kt={class:"fs-5 d-flex align-items-center"},Ct={class:"fs-4 text-primary fw-bold px-2"},Pt=t("i",{class:"bi bi-x-circle pe-1"},null,-1),Tt={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3"},Vt={class:"card product-card w-100 h-100"},jt=["onClick"],Nt=["src"],St=t("span",{class:"seemore-text d-flex justify-content-center align-items-center text-white fw-bold"},[t("i",{class:"bi bi-search pe-1"}),r(" 查看更多 ")],-1),At={class:"card-body p-3"},Et={class:"d-flex justify-content-start text-primary fw-bold"},Lt=t("i",{class:"bi bi-house-heart me-2"},null,-1),Dt={class:"card-title fw-bolder text-primary mb-3"},It={class:"d-flex justify-content-between align-items-center mb-3"},Rt={key:0,class:"h5 text-secondary"},$t={key:1,class:"h6 text-secondary"},Bt={key:2,class:"h5 text-primary fw-bold"},Ft={class:"card-footer border-0 bg-transparent pt-0 pb-3"},Mt=["onClick"],Ut=t("i",{class:"bi bi-cart-fill"},null,-1),qt={key:0,class:"col text-center mt-5"},Ht=t("h2",{class:"fw-bolder"},"查無商品",-1),Ot=t("i",{class:"bi bi-bag-x fs-1"},null,-1),zt=[Ht,Ot],Gt={key:1,class:"col-lg-9"},Jt={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3"},Kt={class:"card product-card w-100 h-100"},Qt=["onClick"],Wt=["src"],Xt=t("span",{class:"seemore-text d-flex justify-content-center align-items-center text-white fw-bold"},[t("i",{class:"bi bi-search pe-1"}),r(" 查看更多 ")],-1),Yt={class:"card-body p-3"},Zt={class:"d-flex justify-content-start text-primary fw-bold"},to=t("i",{class:"bi bi-house-heart me-2"},null,-1),oo={class:"card-title fw-bolder text-primary mb-3"},eo={class:"d-flex justify-content-between align-items-center mb-3"},so={key:0,class:"h5 text-secondary"},co={key:1,class:"h6 text-secondary"},ro={key:2,class:"h5 text-primary fw-bold"},no={class:"card-footer border-0 bg-transparent pt-0 pb-3"},ao=["onClick"],io=t("i",{class:"bi bi-cart-fill"},null,-1);function lo(i,a,P,e,T,V){const _=k("VueLoading"),u=k("RouterLink"),y=k("FooterComponent");return s(),c(g,null,[m(_,{active:e.isLoading},null,8,["active"]),t("section",Z,[t("div",tt,[ot,t("nav",et,[t("ol",st,[t("li",ct,[m(u,{to:"/",class:"text-dark hover-nav fw-bold"},{default:C(()=>[r("首頁")]),_:1})]),rt])]),t("div",nt,[t("div",at,[t("div",it,[lt,t("div",dt,[t("button",{type:"button",class:f(["list-group-item list-group-item-action fw-bold",{active:e.selectCategory===""}]),"aria-current":"true",onClick:a[0]||(a[0]=o=>e.selectCategory="")},[ut,r(" 全部商品 ")],2),(s(!0),c(g,null,w(e.categories,o=>(s(),c("button",{key:`category-${o}`,type:"button",class:f(["list-group-item list-group-item-action fw-bold",{active:o===e.selectCategory}]),onClick:d=>e.selectCategory=o},[bt,r(" 只想喝"+n(o),1)],10,_t))),128))])]),t("div",ht,[pt,t("ul",ft,[t("li",null,[t("button",{onClick:a[1]||(a[1]=o=>e.selectCategory=""),class:f([{active:e.selectCategory===""},"dropdown-item fw-bold"]),type:"button"},[mt,r("全部商品 ")],2)]),t("li",null,[(s(!0),c(g,null,w(e.categories,o=>(s(),c("button",{key:o,class:f([{active:o===e.selectCategory},"dropdown-item fw-bold"]),onClick:d=>e.selectCategory=o,type:"button"},[yt,r("只想喝"+n(o),1)],10,gt))),128))])])]),t("div",vt,[O(t("input",{type:"text",class:"form-control border border-primary border-2 rounded-0",placeholder:"請輸入搜尋商品","onUpdate:modelValue":a[2]||(a[2]=o=>e.search=o)},null,512),[[z,e.search]])])]),e.search?(s(),c("div",wt,[t("div",xt,[t("div",kt,[r(" 以下為您顯示 "),t("span",Ct,n(e.search),1),r(" 的結果 "),t("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-2",onClick:a[3]||(a[3]=o=>e.cancelSearch())},[Pt,r("取消搜尋 ")])])]),t("div",Tt,[(s(!0),c(g,null,w(e.searchProducts,o=>(s(),c("div",{class:"col mb-4",key:o.id},[t("div",Vt,[m(u,{to:`/product/${o.id}`},{default:C(()=>[t("div",{class:"product-img cursor-pointer",onClick:d=>e.getProduct(o.id)},[t("img",{src:o.imageUrl,class:"card-img-top object-fit-cover",alt:"productImages"},null,8,Nt),St],8,jt),t("div",At,[t("div",Et,[t("p",null,[Lt,r("只想喝"+n(o.category),1)])]),t("h5",Dt,n(o.title),1),t("div",It,[o.price?b("",!0):(s(),c("div",Rt," NT$"+n(i.$format.currency(o.origin_price)),1)),o.price?(s(),c("del",$t,"NT$"+n(i.$format.currency(o.origin_price)),1)):b("",!0),o.price?(s(),c("div",Bt," NT$"+n(i.$format.currency(o.price)),1)):b("",!0)])])]),_:2},1032,["to"]),t("div",Ft,[t("button",{type:"button",class:f(["btn btn-outline-primary w-100",{disabled:e.isDone===o.id}]),onClick:d=>e.addCart(o.id,i.qty)},[Ut,r(" 加入購物車 ")],10,Mt)])])]))),128))]),e.searchProducts.length===0?(s(),c("div",qt,zt)):b("",!0)])):(s(),c("div",Gt,[t("div",Jt,[(s(!0),c(g,null,w(e.filterProducts,o=>(s(),c("div",{class:"col mb-4",key:o.id},[t("div",Kt,[m(u,{to:`/product/${o.id}`},{default:C(()=>[t("div",{class:"product-img cursor-pointer",onClick:d=>e.getProduct(o.id)},[t("img",{src:o.imageUrl,class:"card-img-top object-fit-cover",alt:"productImages"},null,8,Wt),Xt],8,Qt),t("div",Yt,[t("div",Zt,[t("p",null,[to,r("只想喝"+n(o.category),1)])]),t("h5",oo,n(o.title),1),t("div",eo,[o.price?b("",!0):(s(),c("div",so," NT$"+n(i.$format.currency(o.origin_price)),1)),o.price?(s(),c("del",co,"NT$"+n(i.$format.currency(o.origin_price)),1)):b("",!0),o.price?(s(),c("div",ro," NT$"+n(i.$format.currency(o.price)),1)):b("",!0)])])]),_:2},1032,["to"]),t("div",no,[t("button",{type:"button",class:f(["btn btn-outline-primary w-100",{disabled:e.isDone===o.id}]),onClick:d=>e.addCart(o.id,i.qty)},[io,r(" 加入購物車 ")],10,ao)])])]))),128))])]))])])]),m(y)],64)}const ho=$(Y,[["render",lo]]);export{ho as default};
